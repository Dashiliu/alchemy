name: test-redis
parallelism: 1
timeCharacteristic: EventTime
avgs:
    - com.dfire.platform:alchemy-function-logstash:0.0.11-SNAPSHOT
table:
    sources:
      - name: redis_log
        schema:
          - name: syslog_host
            type: VARCHAR
          - name: syslog_tag
            type: VARCHAR
          - name: message
            type: VARCHAR
        connector:
          property-version: 1
          type: kafka
          version: 0.10
          topic: app-log
        #  startup-mode: earliest-offset
          properties:
              zookeeper.connect: zk1.2dfire-daily.com:2181/kafka1
              bootstrap.servers: 10.1.22.8:9092,10.1.22.7:9092
              group.id: testGroup
        format:
          property-version: 1
          type: grok
          regular: '%{DATA:syslog_host}%{SPACE}\[%{DATA:syslog_tag}\]%{SPACE}%{GREEDYDATA:message}'
    sinks:
        - name: esSink
          index: redis
          type: elasticsearch
          address: 10.1.21.61:9300
          cluster-name: daily
          buffer-size: 2  #1M
#              filed-index: index
          date-format: yyyy.MM.dd
