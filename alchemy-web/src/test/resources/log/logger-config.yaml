name: test-redis
parallelism: 1
time-characteristic: EventTime
#checkpointing-interval: 10000 #ms
avgs:
    - com.dfire.platform:alchemy-function-logstash:0.0.11-SNAPSHOT
table:
    sources:
      - name: logger_log
        schema:
          - name: clazz
            type: VARCHAR
          - name: domain
            type: VARCHAR
          - name: hostName
            type: VARCHAR
          - name: level
            type: VARCHAR
          - name: hostIp
            type: VARCHAR
          - name: line
            type: INT
          - name: lkv
            type: VARCHAR
          - name: marker
            type: VARCHAR
          - name: method
            type: VARCHAR
          - name: stacktrace
            type: VARCHAR
          - name: threadName
            type: VARCHAR
          - name: timestamp
            type: BIGINT
          - name: type
            type: VARCHAR
          - name: message
            type: VARCHAR
        connector:
          property-version: 1
          type: kafka
          version: 0.10
          topic: app-log
        #  startup-mode: earliest-offset
          properties:
               zookeeper.connect: zk1.2dfire-daily.com:2181/kafka1
               bootstrap.servers: 10.1.22.8:9092,10.1.22.7:9092
               group.id: testGroup
        format:
          property-version: 1
          type: json
    udfs:
        - name: DATEFORMAT
          type: logstash
          value: com.dfire.platform.alchemy.function.logstash.DateFormatFunction
    sinks:
        - name: esSink
          index: redis
          type: elasticsearch
          address: 10.1.21.61:9300
          cluster-name: daily
          buffer-size: 2  #1M
#              filedIndex: index
          date-format: yyyy.MM.dd
